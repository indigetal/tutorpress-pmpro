(()=>{"use strict";function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function u(t,o,a,i){var u=o&&o.prototype instanceof s?o:s,l=Object.create(u.prototype);return e(l,"_invoke",function(t,e,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:r,a:p,f:p.bind(r,4),d:function t(e,n){return a=e,i=0,u=r,d.n=n,c}};function p(t,e){for(i=t,u=e,n=0;!f&&s&&!o&&n<l.length;n++){var o,a=l[n],p=d.p,v=a[2];t>3?(o=v===e)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=r):a[0]<=p&&((o=t<2&&p<a[1])?(i=0,d.v=e,d.n=a[1]):p<v&&(o=t<3||a[0]>e||e>v)&&(a[4]=t,a[5]=e,d.n=v,i=0))}if(o||t>1)return c;throw f=!0,e}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(n=i<2?r:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=a["return"])&&n.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=r}else if((n=(f=d.n<0)?u:t.call(e,d))!==c)break}catch(t){a=r,i=1,u=t}finally{s=1}}return{value:n,done:f}}}(t,a,i),!0),l}var c={};function s(){}function l(){}function f(){}n=Object.getPrototypeOf;var d=[][a]?n(n([][a]())):(e(n={},a,function(){return this}),n),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,e(p,"constructor",f),e(f,"constructor",l),l.displayName="GeneratorFunction",e(f,i,"GeneratorFunction"),e(p),e(p,i,"Generator"),e(p,a,function(){return this}),e(p,"toString",function(){return"[object Generator]"}),(t=function t(){return{w:u,m:v}})()}function e(t,r,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function t(r,n,o,i){function u(t,n){e(r,t,function(e){return this._invoke(t,n,e)})}n?a?a(r,n,{value:o,enumerable:!i,configurable:!i,writable:!i}):r[n]=o:(u("next",0),u("throw",1),u("return",2))},e(t,r,n,o)}function r(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function u(t){r(i,o,a,u,c,"next",t)}function c(t){r(i,o,a,u,c,"throw",t)}u(void 0)})}}function o(t){return a.apply(this,arguments)}function a(){a=n(t().m(function e(r){var n,o;return t().w(function(t){while(1)switch(t.p=t.n){case 0:t.p=0;t.n=1;return fetch(window._tutorobject.ajaxurl,{method:"POST",body:r});case 1:n=t.v;return t.a(2,n);case 2:t.p=2;o=t.v;tutor_toast(__("Operation failed","tutor-pro"),o,"error");case 3:return t.a(2)}},e,null,[[0,2]])}));return a.apply(this,arguments)}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var i=n&&n.prototype instanceof s?n:s,l=Object.create(i.prototype);return u(l,"_invoke",function(r,n,o){var a,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function e(r,n){return a=r,i=0,u=t,d.n=n,c}};function p(r,n){for(i=r,u=n,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,v=a[2];r>3?(o=v===n)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=r<2&&p<a[1])?(i=0,d.v=n,d.n=a[1]):p<v&&(o=r<3||a[0]>n||n>v)&&(a[4]=r,a[5]=n,d.n=v,i=0))}if(o||r>1)return c;throw f=!0,n}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),i=l,u=v;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a["return"])&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=d.n<0)?u:r.call(n,d))!==c)break}catch(e){a=t,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(r,o,a),!0),l}var c={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var d=[][n]?e(e([][n]())):(u(e={},n,function(){return this}),e),p=f.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,u(p,"constructor",f),u(f,"constructor",l),l.displayName="GeneratorFunction",u(f,o,"GeneratorFunction"),u(p),u(p,o,"Generator"),u(p,n,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(i=function t(){return{w:a,m:v}})()}function u(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}u=function t(e,r,n,a){function i(t,r){u(e,t,function(e){return this._invoke(t,r,e)})}r?o?o(e,r,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},u(t,e,r,n)}function c(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function i(t){c(a,n,o,i,u,"next",t)}function u(t){c(a,n,o,i,u,"throw",t)}i(void 0)})}}var l=wp.i18n,f=l.__,d=l.sprintf;window.jQuery(document).ready(function(t){var e=document.getElementById("tutor-google-meet-meta-box-wrapper");var r=document.getElementById("tutor-common-confirmation-modal");var n=f("Something went wrong, please refresh the page & try again!","tutor-pro");var a=document.getElementById("tutor-course-content-builder-root");var u="tutor-gm-create-new-meeting";var c="tutor-gm-update-meeting";if(e){e.onclick=function(t){var e=t.target;if(e.classList.contains("tutor-google-meet-list-delete")){t.preventDefault();l(e)}if(e.classList.contains("tutor-gm-delete")){t.preventDefault();e=e.closest("a.tutor-google-meet-list-delete");l(e)}if(e.classList.contains(u)||e.classList.contains(c)){t.preventDefault();try{v(e)}catch(t){tutor_toast(f("Failed","tutor-pro"),n,"warning")}}if(e.hasAttribute("type")&&e.getAttribute("type")==="checkbox"){if(e.hasAttribute("checked")){e.removeAttribute("checked")}else{e.setAttribute("checked","checked")}}return};t(document.body).on("change",'#tutor-google-meet-meta-box-wrapper input[type="checkbox"]',function(){if(t(this).is(":checked")){t(this).closest(".tutor-modal").find("input[name=attendees]").val("Yes")}else{t(this).closest(".tutor-modal").find("input[name=attendees]").val("No")}})}if(a){a.onclick=function(t){var e=t.target;if(e.classList.contains("tutor-google-meet-list-delete")){t.preventDefault();l(e)}if(e.classList.contains(u)||e.classList.contains(c)){t.preventDefault();try{v(e)}catch(t){tutor_toast(f("Failed","tutor-pro"),n,"warning")}}return};t(document.body).on("change",'#tutor-course-content-builder-root input[type="checkbox"]',function(){if(t(this).is(":checked")){t(this).closest(".tutor-modal").find("input[name=attendees]").val("Yes")}else{t(this).closest(".tutor-modal").find("input[name=attendees]").val("No")}})}function l(t){var e=t.dataset.eventId;var n=t.dataset.meetingPostId;var o=t.dataset.itemReference;r.querySelector("[name=id]").value=n;r.querySelector("[name=event-id]").value=e;r.querySelector("[name=item-reference]").value=o}if(r){var p=r.querySelector("button[data-tutor-modal-submit]");p.onclick=function(){var e=s(i().m(function e(n){var a,u,c,s,l;return i().w(function(e){while(1)switch(e.n){case 0:n.preventDefault();a=n.target;u=new FormData;c=r.querySelector("[name=item-reference]").value;u.set("event-id",r.querySelector("[name=event-id]").value);u.set("post-id",r.querySelector("[name=id]").value);u.set("action","tutor_google_meet_delete");u.set(window.tutor_get_nonce_data(true).key,window.tutor_get_nonce_data(true).value);a.setAttribute("disabled",true);a.classList.add("is-loading");e.n=1;return o(u);case 1:s=e.v;if(!s.ok){e.n=6;break}e.n=2;return s.json();case 2:l=e.v;if(!(l.status_code===200||l.status_code===201)){e.n=4;break}tutor_toast(f("Success","tutor-pro"),l.message,"success");if(!(_tutorobject.current_page==="google-meet")){e.n=3;break}window.location.reload();return e.a(2);case 3:e.n=5;break;case 4:tutor_toast(f("Failed","tutor-pro"),l.message,"warning");case 5:a.classList.remove("is-loading");a.removeAttribute("disabled");r.classList.remove("tutor-is-active");t("body").removeClass("tutor-modal-open");window.dispatchEvent(new Event(_tutorobject.content_change_event));e.n=7;break;case 6:tutor_toast(f("Error","tutor-pro"),f("Something went wrong, please try after refreshing page","tutor-pro"),"error");a.classList.remove("is-loading");a.removeAttribute("disabled");case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()}function v(t){return m.apply(this,arguments)}function m(){m=s(i().m(function e(r){var n,a,u,c,s,l,p,v,m=arguments;return i().w(function(e){while(1)switch(e.n){case 0:n=m.length>1&&m[1]!==undefined?m[1]:[];a=r.closest(".tutor-modal");u=a.getAttribute("id");c=a.querySelectorAll("[name]");s=new FormData;l=[];c.forEach(function(t){if(t.value===""&&t.name!=="attendees"){l.push(d(f("%s is required","tutor-pro"),t.name))}if(t.name==="attendees"){s.set(t.name,t.value===""?"Yes":t.value)}else{s.set(t.name,t.value)}});s.set("action","tutor_google_meet_new_meeting");n.forEach(function(t){s.set(t.name,t.value)});r.classList.add("is-loading");r.setAttribute("disabled",true);if(!l.length){e.n=1;break}l.forEach(function(t){tutor_toast(f("Validation Error","tutor-pro"),g(t.replace(/_/g," ")),"warning")});r.removeAttribute("disabled");r.classList.remove("is-loading");return e.a(2);case 1:e.n=2;return o(s);case 2:p=e.v;if(!p.ok){e.n=8;break}e.n=3;return p.json();case 3:v=e.v;if(!(v.status_code===200||v.status_code===201)){e.n=6;break}if(!(u==="tutor-google-meet-create-modal"||a.classList.contains("tutor-gm-topic-create-modal"))){e.n=4;break}tutor_toast(f("Success","tutor-pro"),v.message,"success");e.n=5;break;case 4:tutor_toast(f("Success","tutor-pro"),v.message,"success");if(!(_tutorobject.current_page==="google-meet")){e.n=5;break}window.location.reload();return e.a(2);case 5:a.classList.remove("tutor-is-active");t("body").removeClass("tutor-modal-open");window.dispatchEvent(new Event(_tutorobject.content_change_event));e.n=7;break;case 6:tutor_toast(f("Failed","tutor-pro"),v.message,"warning");case 7:e.n=9;break;case 8:tutor_toast(f("Failed","tutor-pro"),f("Something went wrong, please try again!","tutor-pro"),"warning");case 9:r.classList.remove("is-loading");r.removeAttribute("disabled");case 10:return e.a(2)}},e)}));return m.apply(this,arguments)}function g(t){var e=t.substr(0,1);return e.toUpperCase()+t.substr(1)}function h(e,r){var n=e.getBoundingClientRect();setTimeout(function(){var o=t("body").scrollTop();r.dpDiv.css({top:n.top+e.offsetHeight+o})},0)}function b(){t(".tutor-google-meet-timepicker").timepicker({timeFormat:"hh:mm TT",beforeShow:function t(e,r){h(e,r)}})}function y(){t(".tutor-google-meet-timepicker").timepicker({timeFormat:"hh:mm TT",beforeShow:function t(e,r){h(e,r)}})}b();window.addEventListener(_tutorobject.content_change_event,b);var w=document.querySelectorAll(".tutor-google-meet-credential-form .drag-drop-zone input[type=file]");if(w.length>0){w.forEach(function(t){var e=t.closest(".drag-drop-zone");["dragover","dragleave","dragend"].forEach(function(t){if(t==="dragover"){e.addEventListener(t,function(t){t.preventDefault();e.classList.add("dragover")})}else{e.addEventListener(t,function(t){e.classList.remove("dragover")})}});e.addEventListener("drop",function(r){r.preventDefault();var n=r.dataTransfer.files;_(n,t,e);e.classList.remove("dragover")});t.addEventListener("change",function(r){var n=r.target.files;_(n,t,e)})})}var _=function t(e,r,n){if(e.length){r.files=e;n.classList.add("file-attached");n.querySelector(".file-info").innerHTML="<strong>File attached</strong> - ".concat(e[0].name)}else{n.classList.remove("file-attached");n.querySelector(".file-info").innerHTML=""}};var k=document.getElementById("tutor-google-meet-credential-upload");var S=document.getElementById("tutor-google-meet-choose-label");var E=document.querySelector(".tutor-google-meet-credential-form .drag-drop-zone");if(S){S.onclick=function(t){k.click()}}if(k){k.onchange=function(t){var e=t.target.files[0];L(e)}}if(E){E.addEventListener("drop",function(t){t.preventDefault();var e=t.dataTransfer.files[0];L(e)})}function L(t){return j.apply(this,arguments)}function j(){j=s(i().m(function t(e){var r,n,a,u,c;return i().w(function(t){while(1)switch(t.p=t.n){case 0:r=new FormData;n=document.querySelector(".file-info");r.set("file",e);r.set("action","tutor_pro_google_meet_credential_upload");r.set(window.tutor_get_nonce_data(true).key,window.tutor_get_nonce_data(true).value);t.p=1;if(!(e.type==="application/json")){t.n=5;break}S.classList.add("is-loading");t.n=2;return o(r);case 2:a=t.v;if(!a.ok){t.n=4;break}t.n=3;return a.json();case 3:u=t.v;if(u.success){tutor_toast(f("Success","tutor-pro"),u.data,"success");window.location.reload()}else{tutor_toast(f("Error","tutor-pro"),u.data,"warning")}S.classList.remove("is-loading");case 4:t.n=6;break;case 5:S.classList.remove("is-loading");tutor_toast(f("Error","tutor-pro"),f("Invalid file type!","tutor-pro"),"warning");k.value="";if(n){n.innerHTML=""}case 6:t.n=8;break;case 7:t.p=7;c=t.v;tutor_toast(f("Error","tutor-pro"),f("Something went wrong, please try again!","tutor-pro"),"warning");case 8:return t.a(2)}},t,null,[[1,7]])}));return j.apply(this,arguments)}var T=document.getElementById("tutor-google-meet-settings");if(T){T.onchange=function(){var t=s(i().m(function t(e){var r,a,u,c,s,l,d,p;return i().w(function(t){while(1)switch(t.p=t.n){case 0:r=false;a=e.target;if(!(a.hasAttribute("type")&&a.getAttribute("type")==="search")){t.n=1;break}return t.a(2);case 1:if(!a.hasAttribute("data-value")){t.n=2;break}r=true;u=e.target.dataset.value;c=a.value;if(!(u===c)){t.n=2;break}return t.a(2);case 2:s=new FormData(T);t.p=3;t.n=4;return o(s);case 4:l=t.v;if(!l.ok){t.n=6;break}t.n=5;return l.json();case 5:d=t.v;if(d.success){tutor_toast(f("Success","tutor-pro"),d.data,"success");if(r){a.setAttribute("data-value",a.value)}}else{tutor_toast(f("Failed","tutor-pro"),d.data,"error")}t.n=7;break;case 6:tutor_toast(f("Error","tutor-pro"),f(l.statusText),"error");case 7:t.n=9;break;case 8:t.p=8;p=t.v;tutor_toast(f("Error","tutor-pro"),n,"error");case 9:return t.a(2)}},t,null,[[3,8]])}));return function(e){return t.apply(this,arguments)}}()}var F=document.getElementById("tutor-meet-confirmation-form");if(F){F.onsubmit=function(){var t=s(i().m(function t(e){var r,n,a,u,c,s,l;return i().w(function(t){while(1)switch(t.p=t.n){case 0:e.preventDefault();r=new FormData(F);n=F.querySelector("[data-tutor-modal-submit]");n.classList.add("is-loading");n.setAttribute("disabled",true);t.p=1;t.n=2;return o(r);case 2:a=t.v;t.n=3;return a.json();case 3:u=t.v;c=u.success,s=u.data;if(c){tutor_toast(f("Success","tutor-pro"),s,"success");location.reload()}else{tutor_toast(f("Failed","tutor-pro"),s,"error")}t.n=5;break;case 4:t.p=4;l=t.v;tutor_toast(f("Failed","tutor-pro"),f("Something went wrong, please try again","tutor-pro"),"error");case 5:t.p=5;n.classList.remove("is-loading");n.removeAttribute("disabled");return t.f(5);case 6:return t.a(2)}},t,null,[[1,4,5,6]])}));return function(e){return t.apply(this,arguments)}}()}})})();