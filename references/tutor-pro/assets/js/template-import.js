(()=>{function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function u(t,o,a,i){var u=o&&o.prototype instanceof s?o:s,l=Object.create(u.prototype);return e(l,"_invoke",function(t,e,o){var a,i,u,s=0,l=o||[],p=!1,d={p:0,n:0,v:r,a:f,f:f.bind(r,4),d:function t(e,n){return a=e,i=0,u=r,d.n=n,c}};function f(t,e){for(i=t,u=e,n=0;!p&&s&&!o&&n<l.length;n++){var o,a=l[n],f=d.p,v=a[2];t>3?(o=v===e)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=r):a[0]<=f&&((o=t<2&&f<a[1])?(i=0,d.v=e,d.n=a[1]):f<v&&(o=t<3||a[0]>e||e>v)&&(a[4]=t,a[5]=e,d.n=v,i=0))}if(o||t>1)return c;throw p=!0,e}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&f(l,v),i=l,u=v;(n=i<2?r:u)||!p;){a||(i?i<3?(i>1&&(d.n=-1),f(i,u)):d.n=u:d.v=u);try{if(s=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=a["return"])&&n.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=r}else if((n=(p=d.n<0)?u:t.call(e,d))!==c)break}catch(t){a=r,i=1,u=t}finally{s=1}}return{value:n,done:p}}}(t,a,i),!0),l}var c={};function s(){}function l(){}function p(){}n=Object.getPrototypeOf;var d=[][a]?n(n([][a]())):(e(n={},a,function(){return this}),n),f=p.prototype=s.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,e(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=p,e(f,"constructor",p),e(p,"constructor",l),l.displayName="GeneratorFunction",e(p,i,"GeneratorFunction"),e(f),e(f,i,"Generator"),e(f,a,function(){return this}),e(f,"toString",function(){return"[object Generator]"}),(t=function t(){return{w:u,m:v}})()}function e(t,r,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function t(r,n,o,i){function u(t,n){e(r,t,function(e){return this._invoke(t,n,e)})}n?a?a(r,n,{value:o,enumerable:!i,configurable:!i,writable:!i}):r[n]=o:(u("next",0),u("throw",1),u("return",2))},e(t,r,n,o)}function r(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function u(t){r(i,o,a,u,c,"next",t)}function c(t){r(i,o,a,u,c,"throw",t)}u(void 0)})}}document.addEventListener("DOMContentLoaded",function(){var e=wp.i18n.__;var r=document.querySelector(".tutor-template-import-area");var o=document.querySelector(".tutor-template-import-btn");var a=document.getElementById("include-demo-courses");var i;if(r){var u=function(){var r=n(t().m(function r(){var n,a,u,s,f,v,m,b;return t().w(function(t){while(1)switch(t.p=t.n){case 0:isPluginInstallationDone=false;n=0;case 1:if(!(n<l.length)){t.n=9;break}t.p=2;a=new FormData;a.append("action","tutor_template_required_plugin_install");a.append(_tutorobject.nonce_key,_tutorobject._tutor_nonce);a.append("plugin_name",l[n]);t.n=3;return fetch(_tutorobject.ajaxurl,{method:"POST",body:a});case 3:u=t.v;t.n=4;return u.json();case 4:s=t.v;if(!(200===s.status_code)){t.n=5;break}isPluginInstallationDone=true;t.n=6;break;case 5:c();tutor_toast(e("Error","tutor-pro"),s===null||s===void 0?void 0:s.message,"error");return t.a(2);case 6:t.n=8;break;case 7:t.p=7;m=t.v;c();tutor_toast(e("Something went wrong!","tutor-pro"),"","error");return t.a(2);case 8:n++;t.n=1;break;case 9:if(!isPluginInstallationDone){t.n=16;break}i=o.getAttribute("data-import_template_id");t.p=10;t.n=11;return p();case 11:f=t.v;t.n=12;return f.json();case 12:v=t.v;if(!(f.ok&&200===v.status_code)){t.n=13;break}d();t.n=14;break;case 13:throw new Error((v===null||v===void 0?void 0:v.message)||e("Template import failed!","tutor-pro"));case 14:t.n=16;break;case 15:t.p=15;b=t.v;c();tutor_toast(e("Error","tutor-pro"),e(b===null||b===void 0?void 0:b.message,"tutor-pro"),"error");return t.a(2);case 16:return t.a(2)}},r,null,[[10,15],[2,7]])}));return function t(){return r.apply(this,arguments)}}();var c=function t(){var e=o.querySelector("i");o.classList.remove("is-loading");o.classList.add("tutor-template-import-btn");o.classList.remove("tutor-template-view-template-btn");o.removeAttribute("disabled");e.classList.add("tutor-icon-import");e.classList.remove("tutor-icon-circle-mark");var r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" role="presentation" aria-hidden="true" class="css-xron3k-svg-SVGIcon"><rect width="16" height="16" rx="8" fill="#E5803C"></rect><path d="M12.252 7.042c0 .004 0 .008-.003.012l-.862 3.951a.609.609 0 0 1-.598.495H5.213a.61.61 0 0 1-.598-.495l-.862-3.95c0-.005-.002-.009-.003-.013a.609.609 0 0 1 1.056-.51l1.28 1.38 1.362-3.054v-.004a.609.609 0 0 1 1.106.004l1.362 3.054 1.28-1.38a.609.609 0 0 1 1.055.51h.001Z" fill="#fff"></path></svg>';o.innerHTML="".concat(e.outerHTML," import ").concat(_tutorobject.tutor_pro_url?"":r)};var s=function t(){var e=o.querySelector("i");o.classList.remove("is-loading");o.classList.remove("tutor-template-import-btn");o.removeAttribute("disabled");o.classList.add("tutor-template-view-template-btn");e.classList.remove("tutor-icon-import");e.classList.add("tutor-icon-circle-mark");o.innerHTML="".concat(e.outerHTML," View Template")};document.addEventListener("click",function(t){if(t.target.closest(".tutor-template-import-btn")){o.classList.add("is-loading");o.setAttribute("disabled","disabled");var e=o.querySelector("i");o.innerHTML="".concat(e.outerHTML," Importing");u()}});document.addEventListener("click",function(t){if(t.target.closest(".tutor-template-view-template-btn")){window.open(_tutorobject.site_url,"_blank")}});var l=["tutorbase","droip"];var p=function(){var e=n(t().m(function e(){var r;var n,o,a;return t().w(function(t){while(1)switch(t.n){case 0:n=(r=document.querySelector(".color-palette.active"))===null||r===void 0?void 0:r.getAttribute("data-mode");if(!n)n="default";o=new FormData;o.append("action","import_droip_template");o.append(_tutorobject.nonce_key,_tutorobject._tutor_nonce);o.append("template_id",i);o.append("selected_mode",n);t.n=1;return fetch(_tutorobject.ajaxurl,{method:"POST",body:o});case 1:a=t.v;return t.a(2,a)}},e)}));return function t(){return e.apply(this,arguments)}}();var d=function(){var r=n(t().m(function r(){var n,o,i,u,l,p;return t().w(function(t){while(1)switch(t.p=t.n){case 0:n=new FormData;n.append("action","process_droip_template");n.append(_tutorobject.nonce_key,_tutorobject._tutor_nonce);t.p=1;t.n=2;return fetch(_tutorobject.ajaxurl,{method:"POST",body:n});case 2:o=t.v;t.n=3;return o.json();case 3:i=t.v;if(!(200===i.status_code)){t.n=6;break}u=i===null||i===void 0?void 0:i.data;if(!(u.status==="importing")){t.n=4;break}setTimeout(function(){d()},10);t.n=6;break;case 4:if(!(u.status==="done")){t.n=6;break}l=a.checked;if(!l){t.n=5;break}t.n=5;return f();case 5:s();tutor_toast(e("Success","tutor-pro"),e("Template imported successfully.","tutor-pro"),"success");return t.a(2,true);case 6:t.n=8;break;case 7:t.p=7;p=t.v;c();tutor_toast(e("Error","tutor-pro"),e("Error while processing imported template!","tutor-pro"),"error");return t.a(2,false);case 8:return t.a(2)}},r,null,[[1,7]])}));return function t(){return r.apply(this,arguments)}}();var f=function(){var e=n(t().m(function e(){var r,n,o,a,i,u,c,s,l,p,d=arguments;return t().w(function(t){while(1)switch(t.n){case 0:r=d.length>0&&d[0]!==undefined?d[0]:0;n=document.getElementById("tutor_template_course_data_url");o=n===null||n===void 0?void 0:n.value;if(o){t.n=1;break}return t.a(2,false);case 1:a=new FormData;a.append("job_id",r);a.append("action","tutor_pro_import");a.append(_tutorobject.nonce_key,_tutorobject._tutor_nonce);if(r){t.n=4;break}t.n=2;return fetch(n.value);case 2:i=t.v;t.n=3;return i.blob();case 3:u=t.v;a.append("data",u,"Importer.json");case 4:t.n=5;return fetch(_tutorobject.ajaxurl,{method:"POST",body:a,credentials:"same-origin"});case 5:c=t.v;if(!c.ok){t.n=9;break}t.n=6;return c.json();case 6:s=t.v;if(!(s.status_code==200)){t.n=8;break}l=s.data.job_id;p=s.data.job_progress;if(!(p!=100)){t.n=7;break}t.n=7;return f(l);case 7:if(!(p==100)){t.n=8;break}return t.a(2,true);case 8:t.n=10;break;case 9:return t.a(2,false);case 10:return t.a(2)}},e)}));return function t(){return e.apply(this,arguments)}}()}})})();